var t={fromCountryID:"",toCountryID:"",apiKey:"",set fromCurrency(t){this.fromCountryID=t},set toCurrency(t){this.toCountryID=t},set apiSecret(t){this.apiKey=t},async fetchAllcountries(){const t=await fetch(`https://free.currconv.com/api/v7/countries?&apiKey=${this.apiKey}`);return await t.json()},async fetchRate(){const t=await fetch(`https://free.currconv.com/api/v7/convert?q=${this.fromCountryID}_${this.toCountryID},${this.toCountryID}_${this.fromCountryID}&compact=ultra&apiKey=${this.apiKey}`);return await t.json()}};({loadSelectors:()=>({fromAmount:document.querySelector("#fromAmount"),fromCountry:document.querySelector("#fromCountry"),toAmount:document.querySelector("#toAmount"),toCountry:document.querySelector("#toCountry"),messageDisplay:document.querySelector("#messageDisplay"),currentYear:document.querySelector("#current_year")}),getInputValues(){const{fromAmount:t,fromCountry:e,toAmount:r,toCountry:n}=this.loadSelectors();return{amountFrom:t.value,countryFrom:e.value,amountTo:r.value,countryTo:n.value}},validateInputValues(t,e){let r=!1,n=!1,o=!1;return Boolean(t)&&(n=!0),Boolean(e)&&(o=!0),(n||o)&&(r=!0),this.displayMessage(r,"Please Fill at Least 1 field"),r},takeOnlyInteger(t){let e=parseInt(t.value);return 1==Boolean(e)&&e>=0?(t.value=e,!0):(t.value="",!1)},displayMessage(t,e){const{messageDisplay:r}=this.loadSelectors();r.innerHTML="",0==t&&r.insertAdjacentHTML("afterbegin",`<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>${e}</strong><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>`)},async currencyConvert(e,r){const{countryFrom:n,countryTo:o}=this.getInputValues();t.fromCurrency=n,t.toCurrency=o,1==r&&(t.fromCurrency=o,t.toCurrency=n);let a=1;if(n!=o){const e=await t.fetchRate();a=Object.values(e)[0]}let u=0;return u=1==Boolean(parseFloat(e))&&parseFloat(e)>=0?parseFloat(e)*a:0*a,parseFloat(u).toFixed(2)},generateDropdown(t){const{fromCountry:e,toCountry:r}=this.loadSelectors(),n=t.results,o=Object.values(n).sort(((t,e)=>t.id.localeCompare(e.id))).map((t=>`<option value="${t.currencyId}" ${"Bangladesh"===t.name?"selected":""}> ${t.name} (${t.currencyName})</option>`)).join("");e.innerHTML="",r.innerHTML="",e.insertAdjacentHTML("afterbegin",o),r.insertAdjacentHTML("afterbegin",o)},init(){t.apiSecret="ac5a9d9ad8e1824834e5";const{fromAmount:e,fromCountry:r,toAmount:n,toCountry:o,currentYear:a}=this.loadSelectors(),u=new Date;a.textContent=u.getFullYear(),e.addEventListener("keyup",(async t=>{t.preventDefault(),this.takeOnlyInteger(e),n.value=this.validateInputValues(e.value,null)?await this.currencyConvert(e.value,0):""})),n.addEventListener("keyup",(async t=>{t.preventDefault(),this.takeOnlyInteger(n),e.value=this.validateInputValues(n.value,null)?await this.currencyConvert(n.value,1):""})),r.addEventListener("change",(async e=>{e.preventDefault();const{amountFrom:r,countryFrom:o,amountTo:a,countryTo:u}=this.getInputValues();this.validateInputValues(r,a)&&(t.fromCurrency=o,t.toCurrency=u,n.value=await this.currencyConvert(r,0))})),o.addEventListener("change",(async r=>{r.preventDefault();const{amountFrom:n,countryFrom:o,amountTo:a,countryTo:u}=this.getInputValues();this.validateInputValues(n,a)&&(t.fromCurrency=o,t.toCurrency=u,e.value=await this.currencyConvert(a,1))})),document.addEventListener("DOMContentLoaded",(async e=>{e.preventDefault();const r=await t.fetchAllcountries();this.generateDropdown(r)}))}}).init();
//# sourceMappingURL=index.46cfe611.js.map
